!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.typewrite=t()}(this,function(){"use strict";var e=function(t){return this instanceof e?(this.element=this._getElement(t),this.delay=e.defaultDelay,this.humanize=e.defaultHumanize,this.length=0,this.first=0,this.queue=[],this.text="",void(this.cursor=this._isCursorClassPresent())):new e(t)};return e.defaultDelay=100,e.defaultHumanize=!0,e.prototype._size=function(){return this.queue.length-this.first},e.prototype._cleanUp=function(){this.queue=this.queue.slice(this.first),this.first=0},e.prototype._enqueue=function(e){return this.queue[this.queue.length]=e,this.init||(this.init=!0,this._dequeue()),this},e.prototype._dequeue=function(){if(0!==this._size()){var e=this.queue[this.first];this.first++,2*this.first>=this._size()&&this._cleanUp(),e.call(this)}},e.prototype._getElement=function(e){if("undefined"==typeof e)throw new TypeError("typewrite(element): No value for argument |element| provided.");if("string"!=typeof e&&!(e instanceof Node))throw new TypeError("typewrite(element): The value of argument |element| must be either a selector or a DOM element.");if("string"==typeof e&&(e=document.querySelector(e),null===e))throw new Error("typewrite(element): No matching DOM element for the given selector has been found.");return e},e.prototype._getAllSelectors=function(){var e=[].slice.call(document.styleSheets).reduce(function(e,t){var r="";try{r=styleSheets[i].rules||styleSheets[i].cssRules}catch(n){}return e.concat([].slice.call(r).reduce(function(e,t){return"string"==typeof t.selectorText?e.concat([t.selectorText]):e},[]))},[]);return e},e.prototype._selectorExists=function(e){var t=this._getAllSelectors();return t.indexOf(e)>-1},e.prototype._isCursorClassPresent=function(){return this._selectorExists(".typewrite-cursor")},e.prototype._appendCursorNode=function(){this.cursor&&(this.cursorNode||(this.cursorNode=document.createElement("span"),this.cursorNode.className="typewrite-cursor",this.cursorNode.appendChild(document.createTextNode("|"))),this.element.appendChild(this.cursorNode))},e.prototype._escapeHtml=function(e){var t=e.split("\n"),r=document.createElement("div");return t.forEach(function(e,n){e.length>0&&r.appendChild(document.createTextNode(e)),n<t.length-1&&r.appendChild(document.createElement("br"))}),r.innerHTML},e.prototype._typeChar=function(e){return this.text+=this._escapeHtml(e),this.element.innerHTML=this.text,this._appendCursorNode(),this},e.prototype._bkspChar=function(){return this.text=this.text.slice(0,-1),this.element.innerHTML=this.text,this._appendCursorNode(),this},e.prototype._getDelay=function(){return this.humanize?Math.round(200*Math.random())+this.delay:this.delay},e.prototype._defer=function(e,t){var r="number"==typeof t?this._getDelay()*t:this._getDelay();return setTimeout(function(){e.call(this)}.bind(this),r),this},e.prototype.then=function(e){return this._enqueue(function(){e.call(this),this._defer(this._dequeue)})},e.prototype.setDelay=function(t,r){if("undefined"==typeof t)throw new TypeError("setDelay(delay, humanize): No value for argument |delay| provided.");if("number"!=typeof t||!parseInt(t,10)||1>t)throw new TypeError("setDelay(delay, humanize): The value for argument |delay| must be a positive integer.");if("undefined"!=typeof r&&"boolean"!=typeof r)throw new TypeError("setDelay(delay, humanize): The value for argument |humanize| must be of type boolean.");return this.then(function(){this.delay=t,this.humanize="undefined"==typeof r?e.defaultHumanize:r})},e.prototype.type=function(e){if("undefined"==typeof e)throw new TypeError("type(text): No value for argument |text| provided.");if("string"!=typeof e)throw new TypeError("type(text): The value of argument |text| must be a string.");if(0===e.length)throw new RangeError("type(text): The value of argument |text| must contain at least one character.");return Array.from(e).forEach(function(e){this.length++,this._enqueue(function(){this._typeChar(e),this._defer(this._dequeue)})}.bind(this)),this},e.prototype.backspace=function(e){if("undefined"!=typeof e&&("number"!=typeof e||!parseInt(e,10)||1>e))throw new TypeError("backspace(count): The value of argument |count| must be a positive integer.");e=e||1;for(var t=e;t--;)this.length--,this._enqueue(function(){this._bkspChar(),this._defer(this._dequeue)});return this},e.prototype.clear=function(){return this.backspace(this.length)},e.prototype.pause=function(e){if("undefined"==typeof e)throw new TypeError("pause(time): No value for argument |time| provided.");if("number"!=typeof e)throw new TypeError("pause(time): The argument |time| must be a positive float or integer.");if(e=parseFloat(e),0>=e)throw new RangeError("pause(time): The argument |time| must be a positive float or integer.");return this._enqueue(function(){this._defer(this._dequeue,e)})},e});